# Spec: 005-approval

## Feature Name
승인 시스템

## User Value (고객 가치)
- **품질 관리**: 최종 확인을 통해 저품질 콘텐츠 필터링
- **일정 관리**: 포스팅 스케줄 설정으로 효율적 운영
- **팀 협업**: 승인/거절/수정 요청으로 명확한 피드백

## Target User (누가 쓸까?)
- **Primary**: 서비스 관리자 (팀 리더, 최종 승인자)
- **Secondary**: 콘텐츠 제작팀 (승인 요청자)
- **Use Case**:
  - 생성된 콘텐츠 최종 검토
  - 포스팅 스케줄 설정
  - 수정 피드백 전달

## User Journey & Screen Flow

### 1. 승인 대기 목록
- **UI Elements**:
  - 승인 대기 콘텐츠 그리드
  - 각 카드: 이미지 썸네일, 페르소나명, 캡션 미리보기, 생성 날짜
  - 필터: 페르소나, 상태 (대기/승인/거절), 날짜
  - 상태 배지: 🟡대기 / ✅승인 / ❌거절
- **CTA**: 콘텐츠 클릭 → 상세 검토
- **Next**: 승인 상세 화면

### 2. 승인 상세 화면
- **UI Elements**:
  - 좌측: 이미지 큰 미리보기
  - 우측 상단: 페르소나 정보
  - 우측 중앙: 캡션 + 해시태그 전문
  - 우측 하단: 승인 액션 버튼
  - 메모 영역 (수정 요청 시 피드백)
- **CTA**: "승인", "수정 요청", "거절"
- **Next**: 승인 시 → 스케줄 설정, 거절/수정 요청 시 → 목록 복귀

### 3. 스케줄 설정 모달
- **UI Elements**:
  - 날짜 선택 (캘린더)
  - 시간 선택 (시:분)
  - 최적 시간대 추천 (AI 분석 기반)
  - 예약 목록 (해당 날짜에 이미 예약된 포스트들)
- **CTA**: "스케줄 확정", "즉시 포스팅"
- **Next**: 008-posting (자동 포스팅 큐에 추가)

### 4. 배치 승인 모드
- **UI Elements**:
  - 다중 선택 체크박스
  - 선택된 개수 표시
  - 일괄 액션 버튼 (전체 승인, 전체 거절)
  - 일괄 스케줄 설정 (동일 시간대)
- **CTA**: "선택 항목 일괄 승인"
- **Next**: 스케줄 설정 또는 목록

## Business Rules

### 승인 상태 관리
- **대기 (Pending)**: 초기 상태 (004-caption-generator에서 전달됨)
- **승인 (Approved)**: 포스팅 예정 (스케줄 설정 완료)
- **수정 요청 (Revision)**: 제작팀에 피드백 전달 (003 또는 004로 복귀)
- **거절 (Rejected)**: 포스팅하지 않음 (아카이브)

### 스케줄 설정 규칙
- **최적 시간대** (카테고리별):
  - Beauty: 저녁 8-10시 (퇴근 후 SNS 확인 시간)
  - Fashion: 오후 12-2시 (점심시간), 저녁 7-9시
  - Food: 점심 11시-1시, 저녁 6-8시
  - Fitness: 아침 6-8시, 저녁 6-8시
- **중복 방지**: 동일 페르소나는 하루 최대 1개 포스팅
- **간격 유지**: 페르소나별 최소 24시간 간격

### 승인 권한
- **팀 리더**: 모든 콘텐츠 승인/거절 가능
- **제작팀**: 자신이 만든 콘텐츠만 수정 가능

## Edge Cases

### 승인 충돌
- 동일 콘텐츠에 여러 승인자가 동시 접근: 먼저 처리한 승인 우선
- 승인 상태 변경 알림

### 스케줄 충돌
- 동일 시간대에 너무 많은 포스팅: "최대 10개 포스팅 권장" 경고
- 과거 날짜 선택: "과거 날짜는 선택할 수 없습니다" 오류

### 수정 요청 처리
- 수정 요청 시 원본 데이터 보존
- 피드백 메모 자동 전달 (003/004 화면에 표시)

## Dependencies
- **003-content-composer**: 수정 요청 시 재편집
- **004-caption-generator**: 캡션 수정 요청 시 재작성
- **연관 기능**:
  - 008-posting: 승인된 콘텐츠를 포스팅 큐에 전달

---

## 💡 더 구체화하려면

```
/appkit.spec 005-approval "승인 히스토리 추적 (누가 언제 승인했는지)"
/appkit.spec 005-approval "자동 승인 규칙 (특정 조건 만족 시)"
/appkit.spec 005-approval "승인 통계 (승인율, 평균 검토 시간)"
```
